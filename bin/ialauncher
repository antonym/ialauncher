#!/usr/bin/env python3
import os
import argparse
from ialauncher.backend import Backend
from ialauncher.frontend import Frontend

games_dir= os.path.join(os.path.expanduser("~"), 'games')
if not os.path.isdir(games_dir):
    print('''
Error: the games directory could not be found at {}

Please copy (or symlink) the directory `games` from the IA Launcher
source distribution to your home directory.

(Also, if anyone could enlighten me on The Right Way™ to include the
games directory in the Python package please submit a pull request on
GitHub!)
'''.format(games_dir))
    exit(1)

parser = argparse.ArgumentParser(description='Play all of the Internet Archive’s MS-DOS games offline!')
parser.add_argument('-l', '--letter', help='Show only games starting with this letter')
parser.add_argument('--aspect', action='store_true', help='Preserve aspect ratio of the title screen')
parser.add_argument('-geometry', help='X Geometry string; see the manual page for X(7)')
p = parser.parse_args()
b = Backend(games_dir, letter=p.letter, aspect=p.aspect)
f = Frontend(p.geometry)

if __name__ == '__main__':
    b.start()
    f.start()
    b.end()
