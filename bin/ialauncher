#!/usr/bin/env python3
import os
import argparse
from ialauncher.backend import Backend
from ialauncher.frontend import Frontend

games_dir= os.path.join(os.path.expanduser("~"), 'games')
if not os.path.isdir(games_dir):
    print('''
Error: the games directory could not be found at {}

Please copy (or symlink) the directory `games` from the IA Launcher
source distribution to your home directory.

(Also, if anyone could enlighten me on The Right Wayâ„¢ to include the
games directory in the Python package please submit a pull request on
GitHub)
'''.format(games_dir))
    exit(1)

parser = argparse.ArgumentParser(
    description='Play old school DOS games using DOSBox',
)
parser.add_argument('-e', '--edit',
                    action='store_true',
                    help='Active edit mode, enabling special keystrokes for managing the games',
)
parser.add_argument('-l', '--letter',
                    help='Show only games starting with this letter',
)
parser.add_argument('-geometry',
                    help='X Geometry string; see X(7)',
)

p = parser.parse_args()
b = Backend(games_dir, edit=p.edit, letter=p.letter)
f = Frontend(p.geometry)

if __name__ == '__main__':
    b.start()
    f.start()
    b.end()
